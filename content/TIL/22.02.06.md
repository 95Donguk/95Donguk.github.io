---
emoji: â—
title: 22.02.06 TIL
date: '2022-02-06 00:00:00'
author: 95Donguk
tags: TIL
categories: TIL
---

# [ìë°”ë¡œ êµ¬í˜„í•˜ê³  ë°°ìš°ëŠ” ìë£Œêµ¬ì¡°](https://www.boostcourse.org/cs204) ìˆ˜ê°•

> ## Red Black Tree - ìƒ‰ìƒ í™•ì¸ ë©”ì†Œë“œ
```java
public void checkColor(Node<K,V> node){
	// ë£¨íŠ¸ëŠ” í•­ìƒ ê²€ì€ìƒ‰ì´ë¯€ë¡œ ìƒ‰ì„ í™•ì¸í•  í•„ìš”ê°€ ì—†ë‹¤.
	if (node == root)
		return;
	// ë¹¨ê°„ ë…¸ë“œ 2ê°œê°€ ì—°ì†ìœ¼ë¡œ ë‚˜ì˜¤ëŠ” ê²½ìš° (ë ˆë“œ ë¸”ë™ íŠ¸ë¦¬ ê·œì¹™ ìœ„ë°˜)
	if (!node.black && !node.parent.black)
		correctTree(node);
	// ë¶€ëª¨ ë…¸ë“œë¥¼ ê³„ì† í™•ì¸
	checkColor(node.parent);
}

public void correctTree(Node<K,V> node){
	// nodeì˜ ë¶€ëª¨ ë…¸ë“œê°€ ì™¼ìª½ ìì‹ì´ë©´ ì´ëª¨ ë…¸ë“œëŠ” ì¡°ë¶€ëª¨ ë…¸ë“œì˜ ì˜¤ë¥¸ìª½ ìì‹
	if (node.parent.isLeftChild) {
		// ì´ëª¨ ë…¸ë“œê°€ ê²€ì€ìƒ‰ (ì´ëª¨ ë…¸ë“œê°€ ë¹„ì–´ìˆëŠ” ê²½ìš° í¬í•¨)
		if(node.parent.parent.right == null || node.parent.parent.right.black)
			// íšŒì „
			return rotate(node);
		//  ì´ëª¨ ë…¸ë“œê°€ ë¹¨ê°„ìƒ‰
		if (node.parent.parent.right != null){
			// ìƒ‰ìƒ ë³€í™˜
			node.parent.parent.right.black = true;
			node.parent.parent.black = false;
			node.parent.black = true;
			return;
		}
	}
	// nodeì˜ ë¶€ëª¨ ë…¸ë“œê°€ ì˜¤ë¥¸ìª½ ìì‹ì´ë©´ ì´ëª¨ ë…¸ë“œëŠ” ì¡°ë¶€ëª¨ ë…¸ë“œì˜ ì™¼ìª½ ìì‹
	// ìœ„ ì½”ë“œì™€ ë™ì¼í•˜ê²Œ í•˜ë˜, ì´ëª¨ ë…¸ë“œë¥¼ node.parent.parent.leftë¡œ ë°”ê¾¼ë‹¤.
	else {
		// ì´ëª¨ ë…¸ë“œê°€ ê²€ì€ìƒ‰ (ì´ëª¨ ë…¸ë“œê°€ ë¹„ì–´ìˆëŠ” ê²½ìš° í¬í•¨)
		if(node.parent.parent.left == null || node.parent.parent.left.black)
			// íšŒì „
			return rotate(node);
		//  ì´ëª¨ ë…¸ë“œê°€ ë¹¨ê°„ìƒ‰
		if (node.parent.parent.left != null)
		{
			// ìƒ‰ìƒ ë³€í™˜
			node.parent.parent.left.black = true;
			node.parent.parent.black = false;
			node.parent.black = true;
			return;
		}
	}
}
```

### ìƒê°í•´ë³´ê¸°
* correctTree ë©”ì†Œë“œëŠ” ì–´ë–¤ ì¼ì„ í•˜ë‚˜ìš”?

> ## Red Black Tree - Rotate ë©”ì†Œë“œ

```java
public void rotate(Node<K,V> node){
	// í˜„ì¬ ë…¸ë“œê°€ ì™¼ìª½ ìì‹
	if (node.isLeftChild) {
		// ë¶€ëª¨ ë…¸ë“œê°€ ì™¼ìª½ ìì‹
		if (node.parent.isLeftChild){
			// ì¡°ë¶€ëª¨ ë…¸ë“œë¥¼ ìš°ì¸¡ íšŒì „
			rightRotate(node.parent.parent);
			node.black = false;
			node.parent.black = true;
			if(node.parent.right != null)
				node.parent.right.black = false;
			return;
		}
		// ë¶€ëª¨ ë…¸ë“œê°€ ì˜¤ë¥¸ìª½ ìì‹
		// ì¡°ë¶€ëª¨ ë…¸ë“œë¥¼ ìš°ì¸¡-ì¢Œì¸¡ íšŒì „
		rightLeftRotate(node.parent.parent);
		node.black = true;
		node.right.black = false;
		node.left.black = false;
		return;
	}
	// í˜„ì¬ ë…¸ë“œê°€ ì˜¤ë¥¸ìª½ ìì‹ì¼ ê²½ìš°
	else {
		// ë¶€ëª¨ ë…¸ë“œê°€ ì™¼ìª½ ìì‹
		if (node.parent.isLeftChild){
			// ì¡°ë¶€ëª¨ ë…¸ë“œë¥¼ ì¢Œì¸¡-ìš°ì¸¡ íšŒì „
			leftRightRotate(node.parent.parent);
			node.black = true;
			node.right.black = false;
			node.left.black = false;	
			return;
		}
		// ë¶€ëª¨ ë…¸ë“œê°€ ì˜¤ë¥¸ìª½ ìì‹
		// ì¡°ë¶€ëª¨ ë…¸ë“œë¥¼ ìš°ì¸¡-ì¢Œì¸¡ íšŒì „
		leftRotate(node.parent.parent);
		node.black = false;
		node.parent.black = true;
		if(node.parent.left != null)
			node.parent.left.black = false;
		return;
	}
}
```
* í˜„ì¬ ë…¸ë“œì™€ ë¶€ëª¨ ë…¸ë“œê°€ ê°ê° ì˜¤ë¥¸ìª½ ìì‹ì¸ì§€ ì™¼ìª½ ìì‹ì¸ì§€ì— ë”°ë¼ í•„ìš”í•œ íšŒì „ì´ ë‹¬ë¼ì§„ë‹¤.

### ìƒê°í•´ë³´ê¸°
* í˜„ì¬ ë…¸ë“œê°€ ì˜¤ë¥¸ìª½ ìì‹ì¼ ê²½ìš°ì— ëŒ€í•œ rotate í•¨ìˆ˜ ë©”ì†Œë“œë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”.

> ## Red Black Tree - ì¢Œì¸¡ íšŒì „
```java
// ì¢Œì¸¡ íšŒì „: ì¡°ë¶€ëª¨ ë…¸ë“œë¥¼ ë¶€ëª¨ ë…¸ë“œì˜ ì™¼ìª½ ìì‹ ë…¸ë“œ ìœ„ì¹˜ë¡œ ì˜®ê¸´ë‹¤.
public void leftRotate (Node<K,V> node){
	Node<K,V> temp = node.right;
	node.right = temp.left;
	// ë¶€ëª¨ ë…¸ë“œ node.rightê°€ tempê°€ ë˜ë©´ì„œ ì¡°ë¶€ëª¨ ë…¸ë“œê°€ ì—†ì–´ì§„ë‹¤.
	if(node.right != null) {
		node.right.parent = null;
		node.right.isLeftChild = false;
	}
	// nodeê°€ ë£¨íŠ¸ì¸ ê²½ìš°
	if(node.parent == null) {
		root = temp;
		temp.parent = null;
	}
	// nodeê°€ ë£¨íŠ¸ê°€ ì•„ë‹Œ ê²½ìš°
	else {
		temp.parent = node.parent;
		if(node.isLeftChild) {
			temp.isLeftChild = true;
			temp.parent.left = temp;
		} else {			
			temp.isLeftChild = false;
			temp.parent.right = temp;
		}
		temp.left = node;
		node.isLeftChild = true;
		node.parent = temp;
	}
}
```

### ìƒê°í•´ë³´ê¸°
* ê·¸ë¦¼ì„ ê·¸ë ¤ leftRotate ë©”ì†Œë“œê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”. ê·¸ë¦¬ê³  ìš°ì¸¡ íšŒì „ì— ëŒ€í•œ rightRotate ë©”ì†Œë“œë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”.

> ## Red Black Tree - ì¢Œì¸¡-ìš°ì¸¡ íšŒì „

```java
// ì¢Œì¸¡ íšŒì „ í›„ ìš°ì¸¡ íšŒì „
public void leftRightRotate(Node<K,V> node){
	leftRotate(node.left);
	rightRotate(node);
}
```

### ìƒê°í•´ë³´ê¸°
* ê·¸ë¦¼ì„ ê·¸ë ¤ leftRightRotate ë©”ì†Œë“œê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”. ê·¸ë¦¬ê³  ìš°ì¸¡-ì¢Œì¸¡ íšŒì „ì— ëŒ€í•œ rightLeftRotate ë©”ì†Œë“œë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”.

> ## Red Black Tree - ë†’ì´
```java
public int height() {
	if(root == null)
		return 0;
	return height(root) - 1;
}
// íŠ¸ë¦¬ì˜ ì–´ëŠ ì§€ì ì—ì„œë‚˜ ë†’ì´ëŠ” ì™¼ìª½ê³¼ ì˜¤ë¥¸ìª½ ì¤‘ ê°€ì¥ ê¸´ ê²½ë¡œì˜ ê¸¸ì´
public int height(Node<K,V> node) {
	if (node == null)
		return 0;
	int leftheight = height(node.left) + 1 // í˜„ì¬ ìˆëŠ” ë…¸ë“œê¹Œì§€ ì˜¤ëŠ” ë° í•„ìš”í•œ ê°„ì„  ìˆ˜
	int rightheight = height(node.right) + 1
	if (leftheight > rightheight)
		return leftheight;
	return rightheight;
}
```

### ìƒê°í•´ë³´ê¸°
* height í•¨ìˆ˜ì—ì„œ ì¬ê·€ í•¨ìˆ˜ì˜ ê²°ê³¼ì¸ height(root)ì—ì„œ 1ì„ ë¹¼ì„œ ë°˜í™˜í•´ì•¼ í•˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?

> ## Red Black Tree - ê²€ì€ìƒ‰ ë…¸ë“œ ê°œìˆ˜

```java
public int blackNodes(Node<K,V> node) {
	if (node == null)
		return 1;
	int rightBlackNodes = blackNodes(node.right)
	int leftBlackNodes = blackNodes(node.left)
	// ì˜¤ë¥¸ìª½ê³¼ ì™¼ìª½ì˜ ê²€ì€ìƒ‰ ë…¸ë“œ ê°œìˆ˜ê°€ ë‹¤ë¥´ë©´ ì—ëŸ¬ë¥¼ ë‚´ê±°ë‚˜ ê³ ì³ì¤€ë‹¤.
	if (rightBlackNodes != leftBlackNodes)
		// throw an error
		// or fix the tree
	// ê²€ì€ìƒ‰ ë…¸ë“œì´ë©´ í•´ë‹¹ ë…¸ë“œì˜ ìˆ˜ë¥¼ ëŠ˜ë ¤ì¤€ë‹¤.
	if (node.black)
		leftBlackNodes++;
	return leftBlackNodes;
}
```

### ìƒê°í•´ë³´ê¸°
* ì˜¤ë¥¸ìª½ê³¼ ì™¼ìª½ì˜ ê²€ì€ìƒ‰ ë…¸ë“œ ê°œìˆ˜ê°€ ë‹¤ë¥´ë©´ ë ˆë“œ ë¸”ë™ íŠ¸ë¦¬ì˜ ì–´ë–¤ ê·œì¹™ì„ ìœ„ë°˜í•˜ê²Œ ë˜ë‚˜ìš”?

***
## ğŸ’¡ í‹€ë ¸ê±°ë‚˜ ì˜ëª»ëœ ì •ë³´ê°€ ìˆë‹¤ë©´ ë§ì„¤ì„ ì—†ì´ ëŒ“ê¸€ë¡œ ì•Œë ¤ì£¼ì„¸ìš”!

