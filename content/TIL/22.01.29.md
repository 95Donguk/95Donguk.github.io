---
emoji: â—
title: 22.01.29 TIL
date: '2022-01-29 00:00:00'
author: 95Donguk
tags: TIL
categories: TIL
---

# [ìë°”ë¡œ êµ¬í˜„í•˜ê³  ë°°ìš°ëŠ” ìë£Œêµ¬ì¡°](https://www.boostcourse.org/cs204) ìˆ˜ê°•

> ## í•´ì‹œ - ìƒì„±ì

```java
public class Hash<K, V> implements HashI<K, V> {
	LinkedList<HashElement<K, V>>[] harray;
	// í•´ì‹œ êµ¬í˜„
	public Hash (int tableSize){
		this tableSize = tableSize;
		harray = (LinkedList<HashElement<K, V>>[]) new LinkedList[tableSize]; // í˜• ë³€í™˜
		// ì—°ê²° ë¦¬ìŠ¤íŠ¸ ì²´ì´ë‹
		for (int i=0; i<tableSize; i++)
			harray[i] = new LinkedList<HashElement<K, V>>();
		maxLoadFactor = 0.75;
		numElements=0;
	}
}
```
*ìë°” APIì—ì„œëŠ” ê¸°ë³¸ í…Œì´ë¸” í¬ê¸°ëŠ” 16ì´ë‹¤.*

### ìƒê°í•´ë³´ê¸°
* maxLoadFactorë¥¼ ì¤„ì´ê±°ë‚˜ ëŠ˜ë¦¬ë©´ ì–´ë–»ê²Œ ë‹¬ë¼ì§€ë‚˜ìš”? ì–´ë–¤ ìƒí™©ì—ì„œ maxLoadFactorë¥¼ ì¡°ì ˆí•´ì•¼ í• ê¹Œìš”?

> ## í•´ì‹œ - ìƒì„±ì ë³µìŠµ
```java
public class Hash<K, V> implements HashI<K, V> {
    LinkedListI<HashElement<K, V>>[] hash_array;
    int tableSize, numElements;
    double maxLoadFactor;

    public Hash (int tableSize){
        this tableSize = tableSize;
        maxLoadFactor = 0.75;
        numElements=0;
        hash_array = (LinkedList<HashElement<K, V>>[]) new LinkedList[tableSize];
        for (int i=0; i<tableSize; i++)
            hash_array[i] = new LinkedList<HashElement<K, V>>();
    }
}
```
*ìë°”ì—ì„œ ì œë„¤ë¦­ìœ¼ë¡œ ë°°ì—´ì„ ë§Œë“œëŠ” ê²ƒì€ ì–´ë µë‹¤. ê°ì²´ë¡œ ë°°ì—´ì„ ë§Œë“  ë’¤ í˜•ë³€í™˜ì„ í•´ì¤€ë‹¤.*

> ## í•´ì‹œ - addì™€ remove ë©”ì†Œë“œ

### add
í•´ì‹œì— ë‚´ìš©ì„ ì¶”ê°€í•˜ëŠ” add ë©”ì†Œë“œ
```java
public boolean add(K key, V value){
	// resize
	if (loadFactor() > maxLoadFactor)
		resize(tableSize*2);
	// í‚¤ì™€ ê°’ì„ ì €ì¥í•´ ë†“ì„ object he ì •ì˜
	HashElement<K,V> he = new HashElement(key, value);
	// heì˜ index ì°¾ê¸°
	int hashval = key.hashCode();
	hashval = hashval & 0x7FFFFFFF;
	hashval = hashval % tableSize;
	// add he
	harray[hashval].add(he);

	numElements++;
	return true;
}
```
* í¬ê¸°ê°€ ë„ˆë¬´ ì»¤ì§€ê±°ë‚˜ ì‘ì•„ì§ˆ ê²½ìš°, add ë©”ì†Œë“œì—ì„œ **í¬ê¸°ë¥¼ ì¡°ì ˆ**í•´ì¤˜ì•¼ í•œë‹¤.
* resize ë©”ì†Œë“œì˜ ì›ë¦¬ëŠ” ìƒˆë¡œìš´ í…Œì´ë¸” í¬ê¸°ë¥¼ ê³„ì‚°í•˜ê³  ìƒˆë¡œìš´ í¬ê¸°ê°€ ë” ì‘ë”ë¼ë„ í•´ì‹œë¥¼ ì¡°ì •í•  ìˆ˜ ìˆë‹¤.

### remove
```java
public boolean remove(K key, V value){
	// index ì°¾ê¸°
	int hashval = key.hashCode();
	hashval = hashval & 0x7FFFFFFF;
	hashval = hashval % tableSize;
	// í•´ë‹¹í•˜ëŠ” indexì˜ í‚¤ì™€ ê°’ ì œê±°
	harray[hashval].remove(he);

	numElements--;
	return true;
}
```
* remove ë©”ì†Œë“œì—ì„œëŠ” í¬ê¸° ì¡°ì •ì„ ê±±ì •í•  í•„ìš”ë„ ì—†ê³  ê°ì²´ë¥¼ ìƒì„±í•  ì¼ë„ ì—†ë‹¤.

### ìƒê°í•´ë³´ê¸°
* í¬ê¸°ê°€ ì‘ì•„ì§ˆ ê²½ìš°, add ë©”ì†Œë“œì—ì„œëŠ” ì–´ë–»ê²Œ í¬ê¸°ë¥¼ ì¡°ì ˆí•˜ë‚˜ìš”?

> ## í•´ì‹œ - getValue ë©”ì†Œë“œ
í‚¤ì˜ ê°’ì„ ì°¾ëŠ” getValue ë©”ì†Œë“œ, í‚¤ì˜ indexê°€ ë¬´ì—‡ì¸ì§€ ì°¾ê³  í•´ì‹œì—ì„œ ê·¸ indexë¥¼ ì°¾ì„ ë•Œê¹Œì§€ ë°˜ë³µí•œë‹¤. ê·¸ë¦¬ê³   keyì˜ ê°’ì´ ë™ì¼í•˜ë©´ ê·¸ ë•Œ í‚¤ì˜ ê°’ì„ ë°˜í™˜í•œë‹¤.
```java
public V getValue(K key){
	// í•´ë‹¹í•˜ëŠ” index ì°¾ê¸°
	int hashval = key.hashCode();
	hashval = hashval & 0x7FFFFFFF;
	hashval = hashval % tableSize;
	// ê·¸ indexë¥¼ ì°¾ì„ ë•Œê¹Œì§€ ë°˜ë³µ
	for (HashElement<K, V> he : harray[hashval]){
		if (((Comparable<K>)key).compareTo(he.key) == 0){
			return he.val;
                }
        }
	return null;
}
```

### ìƒê°í•´ë³´ê¸°
* getValue ë©”ì†Œë“œì˜ ì‹œê°„ ë³µì¡ë„ëŠ” ë¬´ì—‡ì¸ê°€ìš”?

> ## í•´ì‹œ - resize
ì—°ê²° ë¦¬ìŠ¤íŠ¸ê°€ ë„ˆë¬´ ê¸¸ì–´ì§ˆ ê²½ìš° **í•´ì‹œì˜ í¬ê¸°ë¥¼ ì¡°ì ˆ**í•˜ëŠ” resize í•¨ìˆ˜ì´ë‹¤. í¬ê¸°ê°€ ë„ˆë¬´ ì»¤ì§„ë‹¤ë©´, ìƒˆë¡œìš´ ì—°ê²° ë¦¬ìŠ¤íŠ¸ ë°°ì—´ì„ ë§Œë“¤ê³  í•´ì‹œì˜ ëª¨ë“  ì—°ê²° ë¦¬ìŠ¤íŠ¸ì— ìˆëŠ” ìš”ì†Œì˜ í‚¤ì™€ ê°’ì„ ê°ê° ì°¾ì•„ë‚´ì•¼ í•œë‹¤.
```java
public void resize(int newSize){
	// ìƒˆë¡œìš´ ì²´ì¸ í•´ì‹œ ìƒì„±
	<LinkedList<HashElement<K, V>>[] new_array = (<LinkedList<HashElement<K, V>>[]) LinkedList[newSize];
	for (int i=0; i<newSize; i++)
		new_array[i] = new <LinkedList<HashElement<K, V>>[];
	// indexì— ë§ê²Œ ê°’ ì±„ì›Œë„£ê¸°
	for (k key : this) {
		V val = getValue(key);
		HashElement<K,V> he = new HashElement<K, V>(key, val);
		int hashVal = (key.hashCode() & 0x7FFFFFFF) % newSize;
		new_array[hashVal].add(he);
	}
	// ë®ì–´ì“°ê¸°
	hash_array=new_array;
	tableSize=newSize;
}
```
* ëª¨ë“  ë°ì´í„°ë¥¼ ë³µì‚¬í•˜ê³  ë³µì‚¬ë³¸ì„ ë§Œë“¤ê¸° ë•Œë¬¸ì— ë³µì¡ë„ê°€ ë†’ë‹¤.

### ìƒê°í•´ë³´ê¸°
* resize í•¨ìˆ˜ì˜ ì‹œê°„ ë³µì¡ë„ëŠ” ë¬´ì—‡ì¸ê°€ìš”?

## í•´ì‹œ - Keyë°˜ë³µì
ëª¨ë“  í‚¤ì— ëŒ€í•´ ë°˜ë³µí•˜ì—¬ í•´ì‹œì˜ ì „ì²´ ë‚´ìš©ì„ ì‚´í´ë³´ëŠ” ì‘ì—…
```java
// í‚¤ì— ì—°ê²°ëœ ì—°ê²° ë¦¬ìŠ¤íŠ¸ì˜ ë‚´ìš©ì„ ì‚´í´ë³´ëŠ” í•¨ìˆ˜
class IteratorHelper<T> implements Iterator<T>{
	T[] keys;
	int position; // ìœ„ì¹˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë³€ìˆ˜
	// keyë°˜ë³µì ì‚¬ìš©
	public IteratorHelper(){
		keys = (T[]) Object[numElements];
		int p=0; // ìœ„ì¹˜ ë³€ìˆ˜
		for (int i=0; i<tableSize; i++) {
			<LinkedList<HashElement<K, V>> list = hash.array[i];
			for (HashElement<K, V> h : list)
				keys[p++] = (T) h.key();
		}
	position=0;
	}
	// ëì„ í™•ì¸í•  ë•Œ ì‚¬ìš©
	public boolean hasNext()
		return position < keys.length;
}
// í•´ì‹œì˜ ì „ì²´ ë‚´ìš©ì„ ì‚´í´ë³´ëŠ” í•¨ìˆ˜
public T next(){
	if (!hasNext())
		return null;
	return keys[position++];
}
```
* ì‹œê°„ ë³µì¡ë„ëŠ” $O(n)$ ì´ë‹¤.

### ìƒê°í•´ë³´ê¸°
* í•´ì‹œì—ëŠ” ìˆœì„œê°€ ìˆë‚˜ìš”?

***
## ğŸ’¡ í‹€ë ¸ê±°ë‚˜ ì˜ëª»ëœ ì •ë³´ê°€ ìˆë‹¤ë©´ ë§ì„¤ì„ ì—†ì´ ëŒ“ê¸€ë¡œ ì•Œë ¤ì£¼ì„¸ìš”!

